<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Velm Examples for Developers | Velm</title>
    <meta name="description" content="A truly Decoupled Modular Architecture for Laravel">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.DkehGuW7.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.CFtbQkBu.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BEYsT-zq.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DI6M9D4h.js">
    <link rel="modulepreload" href="/assets/velm-examples.md.SNu-pzrv.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/" data-v-9f43907a><!--[--><!--]--><!----><span data-v-9f43907a>Velm</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Docs</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/velmphp/velm" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/velmphp/velm" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _velm-examples" data-v-e6f2a212><div><h1 id="velm-examples-for-developers" tabindex="-1">Velm Examples for Developers <a class="header-anchor" href="#velm-examples-for-developers" aria-label="Permalink to &quot;Velm Examples for Developers&quot;">​</a></h1><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>This page provides quick examples of how to use Velm in your Laravel applications. Each example focuses on a specific aspect of Velm’s modular composition abilities.</p><h2 id="module-composition" tabindex="-1">Module Composition <a class="header-anchor" href="#module-composition" aria-label="Permalink to &quot;Module Composition&quot;">​</a></h2><p>Velm allows you to compose modules together, enabling you to build complex applications with clear separation of concerns. For example, you can have a <code>Sales</code> module that defines a <code>Product</code> model, and an <code>Accounting</code> module that extends the <code>Product</code> model with additional fields and behavior. This promotes modularity and keeps your code organized. When you call methods on the composed model, Velm ensures that all relevant behavior from each module is executed in the correct order, allowing you to build up complex behavior across modules while keeping each module’s code clean and focused on its specific concerns.</p><p>Modules are basically composer packages loaded either from a path or from the repository. Each module defines its dependencies in the composer.json file, and Velm will automatically resolve and load the modules in the correct order based on their dependencies. This allows you to easily manage and compose your modules without worrying about the loading order or conflicts between modules. You can also publish your modules as composer packages and share them with the community, allowing others to easily integrate your modules into their applications. This promotes code reuse and encourages collaboration within the Laravel ecosystem.</p><h2 id="composing-models" tabindex="-1">Composing Models <a class="header-anchor" href="#composing-models" aria-label="Permalink to &quot;Composing Models&quot;">​</a></h2><p>Velm allows you to compose models across modules. For example, you can have a <code>Product</code> model in one module and extend it with additional fields and behavior in another module. This promotes separation of concerns and keeps your code organized. The beautiful part is that you can call methods on the composed model, and Velm will ensure that all the relevant behavior from each module is executed in the correct order.</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Modules/Sales/Models/Product.php</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">use</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> Velm\Core\Domain\</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">BaseModel</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Product</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> BaseModel</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> $fillable</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;name&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;base_price&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;approved_by_sales&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> $casts</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;approved_by_sales&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;boolean&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> approve</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(\Velm\Models\</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Product</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> $self</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        Log</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;Sales approval&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        $self</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">approved_by_sales</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> $self</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> getPriceAttribute</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(\Velm\Models\</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Product</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> $self</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> $self</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">base_price</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> 1.2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Add sales tax</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> scopeOnlyActive</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">$query</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> $query</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">where</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;active&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><strong>NOTE</strong>:</p><ul><li>The <code>approve</code> method is a behavior that can be extended by other modules.</li><li>The <code>getPriceAttribute</code> method is an accessor that modifies the price based on the base price. It can be accessed as <code>$product-&gt;price</code>, just like any other Eloquent accessor.</li><li>The <code>scopeOnlyActive</code> method is a query scope that filters active products. You can use it like this: <code>Product::onlyActive()-&gt;get();</code> to retrieve only active products.</li><li>The <code>fillable</code> and <code>casts</code> properties work as expected, allowing you to mass assign attributes and cast them to the appropriate types. When the model is extended by other modules, these properties will be merged, so you can add additional fillable fields and casts in the extending module without worrying about conflicts.</li><li>Each method defines $self as the first parameter, which is the instance of the composed model. This allows you to access and modify the model’s attributes and call other methods on it, ensuring that all behavior from each module is executed in the correct order when you call a method on the composed model. Since this is implied, you should omit it when calling the method, and Velm will handle passing the composed model instance to each method in the correct order. For example, when you call <code>$product-&gt;approve()</code>, Velm will execute the <code>approve</code> method from the Sales module first, and then any additional <code>approve</code> methods from other modules that extend it, passing the composed model instance to each method in turn. This allows you to build up complex behavior across modules while keeping each module’s code clean and focused on its specific concerns.</li></ul><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Modules/Accounting/Models/Product.php</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">use</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> Velm\Core\Domain\</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">BaseModel</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> Product</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;"> BaseModel</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> $fillable</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;approved_by_accounting&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> $casts</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;approved_by_accounting&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;boolean&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]; </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;"> approve</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(\Velm\Models\</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Product</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> $self</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">        Log</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;Add Accounting approval to the approval workflow&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // Call the parent approve method to ensure all previous approvals are executed</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">        super</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">()-&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">approve</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">$self</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // Add accounting approval logic here</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">        $self</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">approved_by_accounting</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;"> $self</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>NOTE</strong>:</p><ul><li>The <code>approve</code> method in the Accounting module extends the approval workflow by calling <code>super()-&gt;approve($self)</code>, which ensures that the <code>approve</code> method from the Sales module is executed first, and then adds its own logic for accounting approval. This allows you to build up complex behavior across modules while keeping each module’s code clean and focused on its specific concerns. When you call <code>$product-&gt;approve()</code>, Velm will execute the <code>approve</code> method from the Sales module first, and then the <code>approve</code> method from the Accounting module, passing the composed model instance to each method in turn. This ensures that all relevant behavior from each module is executed in the correct order, and you can easily extend the behavior by adding more modules that extend the <code>Product</code> model and define their own <code>approve</code> method. The <code>fillable</code> and <code>casts</code> properties will also be merged, allowing you to add additional fillable fields and casts in the extending module without worrying about conflicts. This promotes separation of concerns and keeps your code organized, while still allowing you to build up complex behavior across modules.</li></ul><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">$product</span><span style="--shiki-light:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C678DD;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> \Velm\Models\</span><span style="--shiki-light:#E5C07B;--shiki-dark:#E5C07B;">Product</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">([</span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;name&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;Example Product&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#98C379;--shiki-dark:#98C379;">&#39;base_price&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#D19A66;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">]);</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">$product</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">saveOrFail</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Approve the product, which will execute the approval workflow defined in both the Sales and Accounting modules</span></span>
<span class="line"><span style="--shiki-light:#E06C75;--shiki-dark:#E06C75;">$product</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#61AFEF;">approve</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// → Sales approval</span></span>
<span class="line"><span style="--shiki-light:#7F848E;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// → Add Accounting approval to the approval workflow</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>NOTE</strong>:</p><ul><li><p>All models have a runtime namespace of <code>\Velm\Models</code>. Velm recommends that you use the <code>velm_model</code> helper when instantiating models, but you can also instantiate the class directly.</p></li><li><p>When you call <code>$product-&gt;approve()</code>, Velm will execute the <code>approve</code> method from the Sales module first, logging “Sales approval”, and then execute the <code>approve</code> method from the Accounting module, logging “Add Accounting approval to the approval workflow”. This demonstrates how Velm ensures</p></li></ul></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"docs_advanced_ide-support.md\":\"CpBO3q8h\",\"docs_advanced_performance.md\":\"BXM8RMMS\",\"docs_advanced_testing.md\":\"Bjp0uCHf\",\"docs_api_class-pipeline-runtime.md\":\"CsK9zObS\",\"docs_api_helpers.md\":\"CXKedIlK\",\"docs_concepts_logical-names.md\":\"QyoKLFhU\",\"docs_concepts_pipelines.md\":\"BS0Zq71c\",\"docs_concepts_registry.md\":\"D2MXMOil\",\"docs_concepts_super-calls.md\":\"Bj-1DTzf\",\"docs_getting-started_installation.md\":\"BDDEBcAV\",\"docs_getting-started_introduction.md\":\"CxilU8Ai\",\"docs_getting-started_quick-start.md\":\"9G3mPWQ4\",\"docs_index.md\":\"tkJVSDB0\",\"docs_models_attributes.md\":\"DNwmXyuU\",\"docs_models_best-practices.md\":\"D92fjqaO\",\"docs_models_logical-models.md\":\"WbzWczJs\",\"docs_models_overview.md\":\"CFe2h8IP\",\"docs_models_properties.md\":\"BijGPHpA\",\"docs_models_scopes.md\":\"IkTZ0q9O\",\"docs_policies_best-practices.md\":\"DTj4ONTB\",\"docs_policies_overview.md\":\"sDnj8vpb\",\"docs_policies_pipelines.md\":\"CeIQRzu_\",\"docs_services_best-practices.md\":\"BC_QTcX3\",\"docs_services_logical-services.md\":\"B2jvUP0M\",\"docs_services_overview.md\":\"2b-8Vl5T\",\"docs_services_pipelines.md\":\"C5r_fF42\",\"index.md\":\"BfGBEmgf\",\"markdown-examples.md\":\"DW5YH9tG\",\"velm-examples.md\":\"SNu-pzrv\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Velm\",\"description\":\"A truly Decoupled Modular Architecture for Laravel\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Docs\",\"link\":\"/docs\"}],\"sidebar\":{\"/docs/\":[{\"text\":\"Getting Started\",\"items\":[{\"text\":\"Introduction\",\"link\":\"/docs/getting-started/introduction\"},{\"text\":\"Installation\",\"link\":\"/docs/getting-started/installation\"},{\"text\":\"Quick Start\",\"link\":\"/docs/getting-started/quick-start\"}]},{\"text\":\"Concepts\",\"items\":[{\"text\":\"Logical Names\",\"link\":\"/docs/concepts/logical-names\"},{\"text\":\"Pipelines\",\"link\":\"/docs/concepts/pipelines\"},{\"text\":\"Super Calls\",\"link\":\"/docs/concepts/super-calls\"},{\"text\":\"Registry\",\"link\":\"/docs/concepts/registry\"}]},{\"text\":\"Models\",\"items\":[{\"text\":\"Overview\",\"link\":\"/docs/models/overview\"},{\"text\":\"Logical Models\",\"link\":\"/docs/models/logical-models\"},{\"text\":\"Attributes\",\"link\":\"/docs/models/attributes\"},{\"text\":\"Scopes\",\"link\":\"/docs/models/scopes\"},{\"text\":\"Properties\",\"link\":\"/docs/models/properties\"}]},{\"text\":\"Services\",\"items\":[{\"text\":\"Overview\",\"link\":\"/docs/services/overview\"},{\"text\":\"Logical Services\",\"link\":\"/docs/services/logical-services\"},{\"text\":\"Pipelines\",\"link\":\"/docs/services/pipelines\"},{\"text\":\"Best Practices\",\"link\":\"/docs/services/best-practices\"}]},{\"text\":\"Advanced\",\"items\":[{\"text\":\"IDE Support\",\"link\":\"/docs/advanced/ide-support\"},{\"text\":\"Performance\",\"link\":\"/docs/advanced/performance\"},{\"text\":\"Testing\",\"link\":\"/docs/advanced/testing\"}]},{\"text\":\"API\",\"items\":[{\"text\":\"Helpers\",\"link\":\"/docs/api/helpers\"},{\"text\":\"Pipeline Runtime\",\"link\":\"/docs/api/class-pipeline-runtime\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/velmphp/velm\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>